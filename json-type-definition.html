<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JSON Type Definition | Ajv JSON schema validator</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
    <meta name="description" content="The fastest JSON schema Validator. Supports JSON Schema draft-04/06/07/2019-09/2020-12 and JSON Type Definition (RFC8927)">
    <meta charset="utf-8">
    <meta property="og:title" content="Ajv JSON schema validator">
    <meta property="og:description" content="The fastest JSON schema Validator. Supports JSON Schema draft-04/06/07/2019-09/2020-12 and JSON Type Definition (RFC8927)">
    <meta property="og:image" content="https://ajv.js.org/img/ajv.png">
    <meta itemprop="image" content="https://ajv.js.org/img/ajv.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Ajv JSON schema validator">
    <meta name="twitter:image:src" content="https://ajv.js.org/img/ajv.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.bb4f749b.css" as="style"><link rel="preload" href="/assets/js/app.269d6eab.js" as="script"><link rel="preload" href="/assets/js/2.53bb977e.js" as="script"><link rel="preload" href="/assets/js/1.6a0e5398.js" as="script"><link rel="preload" href="/assets/js/31.0d5db059.js" as="script"><link rel="preload" href="/assets/js/63.2d4e387a.js" as="script"><link rel="preload" href="/assets/js/6.af23b107.js" as="script"><link rel="preload" href="/assets/js/4.eb19df75.js" as="script"><link rel="prefetch" href="/assets/js/10.2daf032a.js"><link rel="prefetch" href="/assets/js/11.a815211e.js"><link rel="prefetch" href="/assets/js/12.02b59a12.js"><link rel="prefetch" href="/assets/js/13.d7ad60db.js"><link rel="prefetch" href="/assets/js/14.29b3a69c.js"><link rel="prefetch" href="/assets/js/15.2968b1c8.js"><link rel="prefetch" href="/assets/js/16.2b81cdeb.js"><link rel="prefetch" href="/assets/js/17.0bd06c00.js"><link rel="prefetch" href="/assets/js/18.93d6b8b2.js"><link rel="prefetch" href="/assets/js/19.d2579dc7.js"><link rel="prefetch" href="/assets/js/20.0105b7b9.js"><link rel="prefetch" href="/assets/js/21.0b8b9d8c.js"><link rel="prefetch" href="/assets/js/22.e4e8bac5.js"><link rel="prefetch" href="/assets/js/23.5161123f.js"><link rel="prefetch" href="/assets/js/24.9e2bd0ac.js"><link rel="prefetch" href="/assets/js/25.d5f09093.js"><link rel="prefetch" href="/assets/js/26.450afd46.js"><link rel="prefetch" href="/assets/js/27.6ea3a769.js"><link rel="prefetch" href="/assets/js/28.351022dc.js"><link rel="prefetch" href="/assets/js/29.aecc533a.js"><link rel="prefetch" href="/assets/js/3.6e15e07e.js"><link rel="prefetch" href="/assets/js/30.5cea5899.js"><link rel="prefetch" href="/assets/js/32.b826396b.js"><link rel="prefetch" href="/assets/js/33.ccd2d1e9.js"><link rel="prefetch" href="/assets/js/34.dd55990b.js"><link rel="prefetch" href="/assets/js/35.d1c57952.js"><link rel="prefetch" href="/assets/js/36.493ef13c.js"><link rel="prefetch" href="/assets/js/37.a208b6e1.js"><link rel="prefetch" href="/assets/js/38.7676b23b.js"><link rel="prefetch" href="/assets/js/39.235d5dca.js"><link rel="prefetch" href="/assets/js/40.298e5e8f.js"><link rel="prefetch" href="/assets/js/41.1cc1a790.js"><link rel="prefetch" href="/assets/js/42.befafe98.js"><link rel="prefetch" href="/assets/js/43.120a3999.js"><link rel="prefetch" href="/assets/js/44.eb7d5064.js"><link rel="prefetch" href="/assets/js/45.df09b830.js"><link rel="prefetch" href="/assets/js/46.ba8f5ab0.js"><link rel="prefetch" href="/assets/js/47.31995852.js"><link rel="prefetch" href="/assets/js/48.07c36c99.js"><link rel="prefetch" href="/assets/js/49.ae7d63e7.js"><link rel="prefetch" href="/assets/js/5.d186db21.js"><link rel="prefetch" href="/assets/js/50.5680b2f9.js"><link rel="prefetch" href="/assets/js/51.f2367128.js"><link rel="prefetch" href="/assets/js/52.55f0318b.js"><link rel="prefetch" href="/assets/js/53.34897aa3.js"><link rel="prefetch" href="/assets/js/54.34a853ca.js"><link rel="prefetch" href="/assets/js/55.6cf21dac.js"><link rel="prefetch" href="/assets/js/56.b43e8f41.js"><link rel="prefetch" href="/assets/js/57.1bf25d53.js"><link rel="prefetch" href="/assets/js/58.ae493d17.js"><link rel="prefetch" href="/assets/js/59.84baa59d.js"><link rel="prefetch" href="/assets/js/60.63e5562f.js"><link rel="prefetch" href="/assets/js/61.4e7ea0e1.js"><link rel="prefetch" href="/assets/js/62.03721ef1.js"><link rel="prefetch" href="/assets/js/64.a839483e.js"><link rel="prefetch" href="/assets/js/65.f8d0b252.js"><link rel="prefetch" href="/assets/js/66.75dea31f.js"><link rel="prefetch" href="/assets/js/67.14f577d9.js"><link rel="prefetch" href="/assets/js/68.e2045778.js"><link rel="prefetch" href="/assets/js/69.8972c330.js"><link rel="prefetch" href="/assets/js/7.ef23a276.js"><link rel="prefetch" href="/assets/js/70.7019e5a1.js"><link rel="prefetch" href="/assets/js/71.9940a58f.js"><link rel="prefetch" href="/assets/js/72.dccf1359.js"><link rel="prefetch" href="/assets/js/73.db898e46.js"><link rel="prefetch" href="/assets/js/74.d3b39fce.js"><link rel="prefetch" href="/assets/js/75.f3c74b9a.js"><link rel="prefetch" href="/assets/js/76.d89e5f67.js"><link rel="prefetch" href="/assets/js/77.b87bd756.js"><link rel="prefetch" href="/assets/js/78.a60bd479.js"><link rel="prefetch" href="/assets/js/79.2a264ec7.js"><link rel="prefetch" href="/assets/js/80.080d1ad8.js"><link rel="prefetch" href="/assets/js/81.a55d6327.js"><link rel="prefetch" href="/assets/js/82.2e8a4613.js"><link rel="prefetch" href="/assets/js/83.aba1935c.js"><link rel="prefetch" href="/assets/js/84.bef91770.js"><link rel="prefetch" href="/assets/js/85.f97f6785.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.1c8a58cd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bb4f749b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/ajv.svg" alt="Ajv JSON schema validator" class="logo"> <span class="site-name can-hide">Ajv JSON schema validator</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/why-ajv.html" class="nav-link">
  Why use Ajv
</a></li><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  Getting started
</a></li><li class="dropdown-item"><!----> <a href="/guide/typescript.html" class="nav-link">
  Using with TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/schema-language.html" class="nav-link">
  Choosing schema language
</a></li><li class="dropdown-item"><!----> <a href="/guide/managing-schemas.html" class="nav-link">
  Managing schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/combining-schemas.html" class="nav-link">
  Combining schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/formats.html" class="nav-link">
  Format validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/modifying-data.html" class="nav-link">
  Modifying data
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-keywords.html" class="nav-link">
  User-defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/guide/async-validation.html" class="nav-link">
  Asynchronous validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/environments.html" class="nav-link">
  Execution environments
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reference" class="dropdown-title"><span class="title">Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="Reference" class="mobile-dropdown-title"><span class="title">Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/api.html" class="nav-link">
  API Reference
</a></li><li class="dropdown-item"><!----> <a href="/options.html" class="nav-link">
  Ajv options
</a></li><li class="dropdown-item"><!----> <a href="/json-schema.html" class="nav-link">
  JSON Schema
</a></li><li class="dropdown-item"><!----> <a href="/json-type-definition.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JSON Type Definition
</a></li><li class="dropdown-item"><!----> <a href="/strict-mode.html" class="nav-link">
  Strict mode
</a></li><li class="dropdown-item"><!----> <a href="/standalone.html" class="nav-link">
  Standalone validation code
</a></li><li class="dropdown-item"><!----> <a href="/keywords.html" class="nav-link">
  User defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/coercion.html" class="nav-link">
  Type coercion rules
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn more" class="mobile-dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Extending Ajv
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/packages/" class="nav-link">
  Extending Ajv
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-cli.html" class="nav-link">
  ajv-cli
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-errors.html" class="nav-link">
  ajv-errors
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-formats.html" class="nav-link">
  ajv-formats
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-i18n.html" class="nav-link">
  ajv-i18n
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-keywords.html" class="nav-link">
  ajv-keywords
</a></li></ul></li><li class="dropdown-item"><h4>
          Contributors
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contributing.html" class="nav-link">
  Contributing guide
</a></li><li class="dropdown-subitem"><a href="/codegen.html" class="nav-link">
  Code generation design
</a></li><li class="dropdown-subitem"><a href="/components.html" class="nav-link">
  Code components
</a></li><li class="dropdown-subitem"><a href="/code_of_conduct.html" class="nav-link">
  Code of Conduct
</a></li></ul></li><li class="dropdown-item"><h4>
          Information
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/news/" class="nav-link">
  News
</a></li><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-subitem"><a href="/v6-to-v8-migration.html" class="nav-link">
  Migrate from v6
</a></li><li class="dropdown-subitem"><a href="/testimonials.html" class="nav-link">
  What users say
</a></li><li class="dropdown-subitem"><a href="/license.html" class="nav-link">
  License
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/why-ajv.html" class="nav-link">
  Why use Ajv
</a></li><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  Getting started
</a></li><li class="dropdown-item"><!----> <a href="/guide/typescript.html" class="nav-link">
  Using with TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/schema-language.html" class="nav-link">
  Choosing schema language
</a></li><li class="dropdown-item"><!----> <a href="/guide/managing-schemas.html" class="nav-link">
  Managing schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/combining-schemas.html" class="nav-link">
  Combining schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/formats.html" class="nav-link">
  Format validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/modifying-data.html" class="nav-link">
  Modifying data
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-keywords.html" class="nav-link">
  User-defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/guide/async-validation.html" class="nav-link">
  Asynchronous validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/environments.html" class="nav-link">
  Execution environments
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reference" class="dropdown-title"><span class="title">Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="Reference" class="mobile-dropdown-title"><span class="title">Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/api.html" class="nav-link">
  API Reference
</a></li><li class="dropdown-item"><!----> <a href="/options.html" class="nav-link">
  Ajv options
</a></li><li class="dropdown-item"><!----> <a href="/json-schema.html" class="nav-link">
  JSON Schema
</a></li><li class="dropdown-item"><!----> <a href="/json-type-definition.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  JSON Type Definition
</a></li><li class="dropdown-item"><!----> <a href="/strict-mode.html" class="nav-link">
  Strict mode
</a></li><li class="dropdown-item"><!----> <a href="/standalone.html" class="nav-link">
  Standalone validation code
</a></li><li class="dropdown-item"><!----> <a href="/keywords.html" class="nav-link">
  User defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/coercion.html" class="nav-link">
  Type coercion rules
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn more" class="mobile-dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Extending Ajv
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/packages/" class="nav-link">
  Extending Ajv
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-cli.html" class="nav-link">
  ajv-cli
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-errors.html" class="nav-link">
  ajv-errors
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-formats.html" class="nav-link">
  ajv-formats
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-i18n.html" class="nav-link">
  ajv-i18n
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-keywords.html" class="nav-link">
  ajv-keywords
</a></li></ul></li><li class="dropdown-item"><h4>
          Contributors
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contributing.html" class="nav-link">
  Contributing guide
</a></li><li class="dropdown-subitem"><a href="/codegen.html" class="nav-link">
  Code generation design
</a></li><li class="dropdown-subitem"><a href="/components.html" class="nav-link">
  Code components
</a></li><li class="dropdown-subitem"><a href="/code_of_conduct.html" class="nav-link">
  Code of Conduct
</a></li></ul></li><li class="dropdown-item"><h4>
          Information
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/news/" class="nav-link">
  News
</a></li><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-subitem"><a href="/v6-to-v8-migration.html" class="nav-link">
  Migrate from v6
</a></li><li class="dropdown-subitem"><a href="/testimonials.html" class="nav-link">
  What users say
</a></li><li class="dropdown-subitem"><a href="/license.html" class="nav-link">
  License
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Reference</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api.html" class="sidebar-link">API Reference</a></li><li><a href="/options.html" class="sidebar-link">Ajv options</a></li><li><a href="/json-schema.html" class="sidebar-link">JSON Schema</a></li><li><a href="/json-type-definition.html" aria-current="page" class="active sidebar-link">JSON Type Definition</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/json-type-definition.html#jtd-schema-forms" class="sidebar-link">JTD schema forms</a></li><li class="sidebar-sub-header"><a href="/json-type-definition.html#jtdschematype" class="sidebar-link">JTDSchemaType</a></li><li class="sidebar-sub-header"><a href="/json-type-definition.html#extending-jtd" class="sidebar-link">Extending JTD</a></li><li class="sidebar-sub-header"><a href="/json-type-definition.html#validation-errors" class="sidebar-link">Validation errors</a></li></ul></li><li><a href="/strict-mode.html" class="sidebar-link">Strict mode</a></li><li><a href="/standalone.html" class="sidebar-link">Standalone validation code</a></li><li><a href="/keywords.html" class="sidebar-link">User defined keywords</a></li><li><a href="/coercion.html" class="sidebar-link">Type coercion rules</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Extending Ajv</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Contributors</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Information</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="json-type-definition"><a href="#json-type-definition" class="header-anchor">#</a> JSON Type Definition</h1> <p>This document informally describes JSON Type Definition (JTD) specification to help Ajv users to start using it. For formal definition please refer to <a href="https://datatracker.ietf.org/doc/rfc8927/" target="_blank" rel="noopener noreferrer">RFC8927<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Please report any contradictions in this document with the specification.</p> <p>To use JTD schemas you need to import a different Ajv class:</p> <!----> <p></p><div class="table-of-contents"><ul><li><a href="#jtd-schema-forms">JTD schema forms</a><ul><li><a href="#type-form">Type form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>primitive values</span></a></li><li><a href="#enum-form">Enum form</a></li><li><a href="#elements-form">Elements form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>arrays</span></a></li><li><a href="#properties-form">Properties form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>objects</span></a></li><li><a href="#discriminator-form">Discriminator form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>tagged union</span></a></li><li><a href="#values-form">Values form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>dictionary</span></a></li><li><a href="#ref-form">Ref form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>reference definitions</span></a></li><li><a href="#empty-form">Empty form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>any data</span></a></li></ul></li><li><a href="#jtdschematype">JTDSchemaType</a><ul><li><a href="#most-schemas">Most Schemas</a></li><li><a href="#ref-schemas">Ref Schemas</a></li><li><a href="#notable-omissions">Notable Omissions</a></li></ul></li><li><a href="#extending-jtd">Extending JTD</a><ul><li><a href="#metadata-schema-member">Metadata schema member</a></li><li><a href="#union-keyword">Union keyword</a></li><li><a href="#user-defined-keywords">User-defined keywords</a></li></ul></li><li><a href="#validation-errors">Validation errors</a></li></ul></div><p></p> <h2 id="jtd-schema-forms"><a href="#jtd-schema-forms" class="header-anchor">#</a> JTD schema forms</h2> <p>JTD specification defines 8 different forms that the schema for JSON can take for one of most widely used data types in JSON messages (API requests and responses).</p> <p>All forms require that:</p> <ul><li>schema is an object with different members, depending on the form</li> <li>each form can have:
<ul><li>an optional member <code>nullable</code> with a boolean value that allows data instance to be JSON <code>null</code>.</li> <li>an optional member <code>metadata</code> with an object value that allows to pass any additional information or extend the specification (Ajv defines keyword &quot;union&quot; that can be used inside <code>metadata</code>)</li></ul></li></ul> <p>Root schema can have member <code>definitions</code> that has a dictionary of schemas that can be references from any other schemas using form <code>ref</code></p> <h3 id="type-form"><a href="#type-form" class="header-anchor">#</a> Type form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>primitive values</span></h3> <p>This form defines a primitive value.</p> <p>It has a required member <code>type</code> and an optional members <code>nullable</code> and <code>metadata</code>, no other members are allowed.</p> <p><code>type</code> can have one of the following values:</p> <ul><li><code>&quot;string&quot;</code> - defines a string</li> <li><code>&quot;boolean&quot;</code> - defines boolean value <code>true</code> or <code>false</code></li> <li><code>&quot;timestamp&quot;</code> - defines timestamp ( accepting either an <a href="https://datatracker.ietf.org/doc/rfc3339/" target="_blank" rel="noopener noreferrer">RFC3339<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> JSON string or a Date object, configurable via the <code>timestamp</code> Ajv option)</li> <li><code>type</code> values that define integer numbers:
<ul><li><code>&quot;int8&quot;</code> - signed byte value (-128 .. 127)</li> <li><code>&quot;uint8&quot;</code> - unsigned byte value (0 .. 255)</li> <li><code>&quot;int16&quot;</code> - signed word value (-32768 .. 32767),</li> <li><code>&quot;uint16&quot;</code> - unsigned word value (0 .. 65535)</li> <li><code>&quot;int32&quot;</code> - signed 32-bit integer value</li> <li><code>&quot;uint32&quot;</code> - unsigned 32-bit integer value</li></ul></li> <li><code>type</code> values that define floating point numbers:
<ul><li><code>&quot;float32&quot;</code> - 32-bit real number</li> <li><code>&quot;float64&quot;</code> - 64-bit real number</li></ul></li></ul> <p>Unlike JSON Schema, JTD does not allow defining values that can take one of several types, but they can be defined as <code>nullable</code>.</p> <p><strong>Example</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="enum-form"><a href="#enum-form" class="header-anchor">#</a> Enum form</h3> <p>This form defines a string that can take one of the values from the list (the values in the list must be unique).</p> <p>It has a required member <code>enum</code> and optional members <code>nullable</code> and <code>metadata</code>, no other members are allowed.</p> <p>Unlike JSON Schema, JTD does not allow defining <code>enum</code> with values of any other type than string.</p> <p><strong>Example</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="elements-form"><a href="#elements-form" class="header-anchor">#</a> Elements form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>arrays</span></h3> <p>This form defines a homogenous array of any size (possibly empty) with the elements that satisfy a given schema.</p> <p>It has a required member <code>elements</code> (schema that elements should satisfy) and optional members <code>nullable</code> and <code>metadata</code>, no other members are allowed.</p> <p>Unlike JSON Schema, the data instance must be JSON array (without using additional <code>type</code> keyword), and there is no way to enforce the restrictions that cannot be present on type level of most languages, such as array size and uniqueness of items.</p> <p><strong>Example</strong></p> <p>Schema:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">elements</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Valid data: <code>[]</code>, <code>[&quot;foo&quot;]</code>, <code>[&quot;foo&quot;, &quot;bar&quot;]</code></p> <p>Invalid data: <code>[&quot;foo&quot;, 1]</code>, any type other than array</p> <h3 id="properties-form"><a href="#properties-form" class="header-anchor">#</a> Properties form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>objects</span></h3> <p>This form defines record (JSON object) that has defined required and optional properties.</p> <p>It is required that this form has either <code>properties</code> member, or <code>optionalProperties</code>, or both, in which case the cannot have overlapping properties. Additional properties can be allowed by adding an optional boolean member <code>additionalProperties</code> with a value <code>true</code>. This form, as all other, can have optional <code>nullable</code> and <code>metadata</code> members.</p> <p>Unlike JSON Schema, all properties defined in <code>properties</code> schema member are required, the data instance must be JSON object (without using additional <code>type</code> keyword) and by default additional properties are not allowed (with the exception of discriminator tag - see the next section). This strictness minimises user mistakes.</p> <p><strong>Example 1.</strong></p> <p>Schema:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Valid data: <code>{foo: &quot;bar&quot;}</code></p> <p>Invalid data: <code>{}</code>, <code>{foo: 1}</code>, <code>{foo: &quot;bar&quot;, bar: 1}</code>, any type other than object</p> <p><strong>Example 2.</strong></p> <p>Schema:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optionalProperties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">additionalProperties</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Valid data: <code>{foo: &quot;bar&quot;}</code>, <code>{foo: &quot;bar&quot;, bar: &quot;1&quot;}</code>, <code>{foo: &quot;bar&quot;, additional: 1}</code></p> <p>Invalid data: <code>{}</code>, <code>{foo: 1}</code>, <code>{foo: &quot;bar&quot;, bar: &quot;3&quot;}</code>, any type other than object</p> <p><strong>Example 3: invalid schema (overlapping required and optional properties)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optionalProperties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="discriminator-form"><a href="#discriminator-form" class="header-anchor">#</a> Discriminator form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>tagged union</span></h3> <p>This form defines discriminated (tagged) union of different record types.</p> <p>It has required members <code>discriminator</code> and <code>mapping</code> and optional members <code>nullable</code> and <code>metadata</code>, no other members are allowed.</p> <p>The string value of <code>discriminator</code> schema member contains the name of the data member that is the tag of the union. <code>mapping</code> schema member contains the dictionary of schemas that are applied according to the value of the tag member in the data. Schemas inside <code>mapping</code> must have &quot;properties&quot; form.</p> <p>Properties forms inside <code>mapping</code> cannot be <code>nullable</code> and cannot define the same property as discriminator tag.</p> <p><strong>Example 1.</strong></p> <p>Schema:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">discriminator</span><span class="token operator">:</span> <span class="token string">&quot;version&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mapping</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;1&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;2&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;uint8&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Valid data: <code>{version: &quot;1&quot;, foo: &quot;1&quot;}</code>, <code>{version: &quot;2&quot;, foo: 1}</code></p> <p>Invalid data: <code>{}</code>, <code>{foo: &quot;1&quot;}</code>, <code>{version: 1, foo: &quot;1&quot;}</code>, any type other than object</p> <p><strong>Example 3: invalid schema (discriminator tag member defined in mapping)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">discriminator</span><span class="token operator">:</span> <span class="token string">&quot;version&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mapping</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;1&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;2&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;uint8&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="values-form"><a href="#values-form" class="header-anchor">#</a> Values form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>dictionary</span></h3> <p>This form defines a homogenous dictionary where the values of members satisfy a given schema.</p> <p>It has a required member <code>values</code> (schema that member values should satisfy) and optional members <code>nullable</code> and <code>metadata</code>, no other members are allowed.</p> <p>Unlike JSON Schema, the data instance must be JSON object (without using additional <code>type</code> keyword), and there is no way to enforce size restrictions.</p> <p><strong>Example</strong></p> <p>Schema:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">values</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;uint8&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Valid data: <code>{}</code>, <code>{&quot;foo&quot;: 1}</code>, <code>{&quot;foo&quot;: 1, &quot;bar&quot;: 2}</code></p> <p>Invalid data: <code>{&quot;foo&quot;: &quot;bar&quot;}</code>, any type other than object</p> <h3 id="ref-form"><a href="#ref-form" class="header-anchor">#</a> Ref form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>reference definitions</span></h3> <p>This form defines a reference to the schema that is present in the corresponding key in the <code>definitions</code> member of the root schema.</p> <p>It has a required member <code>ref</code> (member of <code>definitions</code> object in the root schema) and optional members <code>nullable</code> and <code>metadata</code>, no other members are allowed.</p> <p>Unlike JSON Schema, JTD does not allow to reference:</p> <ul><li>any schema fragment other than root level <code>definitions</code> member</li> <li>root of the schema - there is another way to define a self-recursive schema (see Example 2)</li> <li>another schema file (but you can still combine schemas from multiple files using JavaScript).</li></ul> <p><strong>Example 1.</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">propFoo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">nullable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">definitions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Example 2: self-referencing schema for binary tree</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token string">&quot;tree&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">definitions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tree</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;int32&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">optionalProperties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token string">&quot;tree&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token string">&quot;tree&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Example 3: invalid schema (missing reference)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">definitions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="empty-form"><a href="#empty-form" class="header-anchor">#</a> Empty form <span class="badge tip" style="vertical-align:top;" data-v-6eb0829b>any data</span></h3> <p>Empty JTD schema defines the data instance that can be of any type, including JSON <code>null</code> (even if <code>nullable</code> member is not present). It cannot have any member other than <code>nullable</code> and <code>metadata</code>.</p> <h2 id="jtdschematype"><a href="#jtdschematype" class="header-anchor">#</a> JTDSchemaType</h2> <p>The type <code>JTDSchemaType</code> can be used to validate that the written schema matches the type you expect to validate. This type is strict such that if typescript compiles, you should require no further type guards. The downside of this is that the types that <code>JTDSchemaType</code> can verify are limited to the types that JTD can verify. If a type doesn't verify, <code>JTDSchemaType</code> should resolve to <code>never</code>, throwing an error when you try to assign to it. This means that types like <code>1 | 2 | 3</code>, or general untagged unions (outside of unions of string literals) cannot be used with <code>JTDSchemaType</code>.</p> <h3 id="most-schemas"><a href="#most-schemas" class="header-anchor">#</a> Most Schemas</h3> <p>Most straightforward types should work with <code>JTDSchemaType</code>, e.g.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">MyType</span> <span class="token punctuation">{</span>
  num<span class="token operator">:</span> <span class="token builtin">number</span>
  optionalStr<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  nullableEnum<span class="token operator">:</span> <span class="token string">&quot;v1.0&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;v1.2&quot;</span> <span class="token operator">|</span> <span class="token keyword">null</span>
  values<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> schema<span class="token operator">:</span> JTDSchemaType<span class="token operator">&lt;</span>MyType<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    num<span class="token operator">:</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">&quot;float64&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    nullableEnum<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;v1.0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v1.2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nullable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    values<span class="token operator">:</span> <span class="token punctuation">{</span>values<span class="token operator">:</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">&quot;int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optionalProperties<span class="token operator">:</span> <span class="token punctuation">{</span>
    optionalStr<span class="token operator">:</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>will compile. Using <code>schema</code> with AJV will guarantee type safety.</p> <h3 id="ref-schemas"><a href="#ref-schemas" class="header-anchor">#</a> Ref Schemas</h3> <p>Ref schemas are a little more advanced, because the types of every definition must be specified in advance.
A simple ref schema is relatively straightforward:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> schema<span class="token operator">:</span> JTDSchemaType<span class="token operator">&lt;</span><span class="token punctuation">{</span>val<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  definitions<span class="token operator">:</span> <span class="token punctuation">{</span>
    num<span class="token operator">:</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">&quot;float64&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    val<span class="token operator">:</span> <span class="token punctuation">{</span>ref<span class="token operator">:</span> <span class="token string">&quot;num&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>note that the type of all definitions was included as a second argument to <code>JTDSchemaType</code>.</p> <p>This also works for recursive schemas:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">LinkedList</span> <span class="token operator">=</span> <span class="token punctuation">{</span>val<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> next<span class="token operator">?</span><span class="token operator">:</span> LinkedList<span class="token punctuation">}</span>
<span class="token keyword">const</span> schema<span class="token operator">:</span> JTDSchemaType<span class="token operator">&lt;</span>LinkedList<span class="token punctuation">,</span> <span class="token punctuation">{</span>node<span class="token operator">:</span> LinkedList<span class="token punctuation">}</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  definitions<span class="token operator">:</span> <span class="token punctuation">{</span>
    node<span class="token operator">:</span> <span class="token punctuation">{</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        val<span class="token operator">:</span> <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">&quot;float64&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      optionalProperties<span class="token operator">:</span> <span class="token punctuation">{</span>
        next<span class="token operator">:</span> <span class="token punctuation">{</span>ref<span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ref<span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="notable-omissions"><a href="#notable-omissions" class="header-anchor">#</a> Notable Omissions</h3> <p><code>JTDSchemaType</code> currently validates that if the schema compiles it will verify an accurate type, but there are a few places with potentially unexpected behavior.
<code>JTDSchemaType</code> doesn't verify the schema is correct. It won't reject schemas that definitions anywhere by the root, and it won't reject discriminator schemas that still define the descriminator in mapping properties. It also won't verify that enum schemas have every enum member as this isn't generally feasible in typescript yet.</p> <h2 id="extending-jtd"><a href="#extending-jtd" class="header-anchor">#</a> Extending JTD</h2> <h3 id="metadata-schema-member"><a href="#metadata-schema-member" class="header-anchor">#</a> Metadata schema member</h3> <p>Each schema form may have an optional member <code>metadata</code> that JTD reserves for implementation/application specific extensions. Ajv uses this member as a location where any non-standard keywords can be used, such as:</p> <ul><li><code>union</code> keyword included in Ajv</li> <li>any user-defined keywords, for example keywords defined in <a href="https://github.com/ajv-validator/ajv-keywords" target="_blank" rel="noopener noreferrer">ajv-keywords<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> package</li> <li>JSON Schema keywords, as long as their names are different from standard JTD keywords. It can be used to enable a gradual migration from JSON Schema to JTD, should it be required.</li></ul> <div class="custom-block warning"><p class="custom-block-title">Extensions are non-portable</p> <p>Ajv-specific extension to JTD are likely to be unsupported by other tools, so while it may simplify adoption, it undermines the cross-platform objective of using JTD. While it is ok to put some human readable information in <code>metadata</code> member, it is recommended not to add any validation logic there (even if it is supported by Ajv).</p></div> <p>Additional restrictions that Ajv enforces on <code>metadata</code> schema member:</p> <ul><li>you cannot use standard JTD keywords there. While strictly speaking it is allowed by the specification, these keywords should be ignored inside <code>metadata</code> - the general approach of Ajv is to avoid anything that is ignored.</li> <li>you need to define all members used in <code>metadata</code> as keywords. If they are no-op it can be done with <code>ajv.addKeyword(&quot;my-metadata-keyword&quot;)</code>. This restriction can be removed by disabling <a href="https://github.com/ajv-validator/ajv/blob/master/docs/strict-mode.md" target="_blank" rel="noopener noreferrer">strict mode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, without affecting the strictness of JTD - unknown keywords would still be prohibited in the schema itself.</li></ul> <h3 id="union-keyword"><a href="#union-keyword" class="header-anchor">#</a> Union keyword</h3> <p>Ajv defines <code>union</code> keyword that is used in the schema that validates JTD schemas (<a href="https://github.com/ajv-validator/ajv/blob/master/lib/refs/jtd-schema.ts" target="_blank" rel="noopener noreferrer">meta-schema<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>).</p> <p>This keyword can be used only inside <code>metadata</code> schema member.</p> <div class="custom-block warning"><p class="custom-block-title">Union keyword is non-portable</p> <p>This keyword is non-standard and it is not supported in other JTD tools, so it is recommended NOT to use this keyword in schemas for your data if you want them to be cross-platform.</p></div> <h3 id="user-defined-keywords"><a href="#user-defined-keywords" class="header-anchor">#</a> User-defined keywords</h3> <p>Any user-defined keywords that can be used in JSON Schema schemas can also be used in JTD schemas, including the keywords in <a href="https://github.com/ajv-validator/ajv-keywords" target="_blank" rel="noopener noreferrer">ajv-keywords<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> package.</p> <div class="custom-block warning"><p class="custom-block-title">User-defined keywords are non-portable</p> <p>It is strongly recommended to only use it to simplify migration from JSON Schema to JTD and not to use non-standard keywords in the new schemas, as these keywords are not supported by any other tools.</p></div> <div class="custom-block warning"><p class="custom-block-title">Parsing does NOT support non-standard JTD keywords</p> <p>compileParser method does not support non-standard JTD keywords, you will have to use JSON.parse and then validates.</p></div> <h2 id="validation-errors"><a href="#validation-errors" class="header-anchor">#</a> Validation errors</h2> <p>TODO</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ajv-validator/ajv/edit/master/docs/json-type-definition.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/json-schema.html" class="prev">
        JSON Schema
      </a></span> <span class="next"><a href="/strict-mode.html">
        Strict mode
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.269d6eab.js" defer></script><script src="/assets/js/2.53bb977e.js" defer></script><script src="/assets/js/1.6a0e5398.js" defer></script><script src="/assets/js/31.0d5db059.js" defer></script><script src="/assets/js/63.2d4e387a.js" defer></script><script src="/assets/js/6.af23b107.js" defer></script><script src="/assets/js/4.eb19df75.js" defer></script>
  </body>
</html>
