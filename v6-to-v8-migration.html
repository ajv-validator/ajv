<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Changes from Ajv v6.12.6 to v8.0.0 | Ajv JSON schema validator</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
    <meta name="description" content="The fastest JSON schema Validator. Supports JSON Schema draft-04/06/07/2019-09/2020-12 and JSON Type Definition (RFC8927)">
    <meta charset="utf-8">
    <meta property="og:title" content="Ajv JSON schema validator">
    <meta property="og:description" content="The fastest JSON schema Validator. Supports JSON Schema draft-04/06/07/2019-09/2020-12 and JSON Type Definition (RFC8927)">
    <meta property="og:image" content="https://ajv.js.org/img/ajv.png">
    <meta itemprop="image" content="https://ajv.js.org/img/ajv.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Ajv JSON schema validator">
    <meta name="twitter:image:src" content="https://ajv.js.org/img/ajv.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.9379b0e3.css" as="style"><link rel="preload" href="/assets/js/app.0db1b107.js" as="script"><link rel="preload" href="/assets/js/2.2673a9d6.js" as="script"><link rel="preload" href="/assets/js/16.0e08068f.js" as="script"><link rel="preload" href="/assets/js/65.a59a9ffe.js" as="script"><link rel="prefetch" href="/assets/js/10.e8c9f8a0.js"><link rel="prefetch" href="/assets/js/11.e9e0a3b6.js"><link rel="prefetch" href="/assets/js/12.15f6c67a.js"><link rel="prefetch" href="/assets/js/13.2db233a9.js"><link rel="prefetch" href="/assets/js/14.94806417.js"><link rel="prefetch" href="/assets/js/15.33beceaa.js"><link rel="prefetch" href="/assets/js/17.b33c0c81.js"><link rel="prefetch" href="/assets/js/18.1fac5acc.js"><link rel="prefetch" href="/assets/js/19.acecafa0.js"><link rel="prefetch" href="/assets/js/20.d684634c.js"><link rel="prefetch" href="/assets/js/21.4780f562.js"><link rel="prefetch" href="/assets/js/22.76785d4f.js"><link rel="prefetch" href="/assets/js/23.4a104768.js"><link rel="prefetch" href="/assets/js/24.6a8564de.js"><link rel="prefetch" href="/assets/js/25.68e87835.js"><link rel="prefetch" href="/assets/js/26.ff04f6e4.js"><link rel="prefetch" href="/assets/js/27.dab9cab2.js"><link rel="prefetch" href="/assets/js/28.b968da88.js"><link rel="prefetch" href="/assets/js/29.820dfd1e.js"><link rel="prefetch" href="/assets/js/3.bec162be.js"><link rel="prefetch" href="/assets/js/30.05ae4d3c.js"><link rel="prefetch" href="/assets/js/31.ce764323.js"><link rel="prefetch" href="/assets/js/32.23ec0f01.js"><link rel="prefetch" href="/assets/js/33.f4d72d2d.js"><link rel="prefetch" href="/assets/js/34.27f86007.js"><link rel="prefetch" href="/assets/js/35.7b110302.js"><link rel="prefetch" href="/assets/js/36.06408bf2.js"><link rel="prefetch" href="/assets/js/37.90751228.js"><link rel="prefetch" href="/assets/js/38.9a7c32d5.js"><link rel="prefetch" href="/assets/js/39.c3bb64c1.js"><link rel="prefetch" href="/assets/js/4.b82e2822.js"><link rel="prefetch" href="/assets/js/40.f83fb491.js"><link rel="prefetch" href="/assets/js/41.4064beb7.js"><link rel="prefetch" href="/assets/js/42.17f817b9.js"><link rel="prefetch" href="/assets/js/43.3f4023a7.js"><link rel="prefetch" href="/assets/js/44.dc4a0655.js"><link rel="prefetch" href="/assets/js/45.6a61cc4b.js"><link rel="prefetch" href="/assets/js/46.c740660b.js"><link rel="prefetch" href="/assets/js/47.0124c62f.js"><link rel="prefetch" href="/assets/js/48.e65ad115.js"><link rel="prefetch" href="/assets/js/49.bf7edc3e.js"><link rel="prefetch" href="/assets/js/5.7468ae9a.js"><link rel="prefetch" href="/assets/js/50.a726b150.js"><link rel="prefetch" href="/assets/js/51.ab7f3e1f.js"><link rel="prefetch" href="/assets/js/52.60699c7e.js"><link rel="prefetch" href="/assets/js/53.9b644844.js"><link rel="prefetch" href="/assets/js/54.3779597a.js"><link rel="prefetch" href="/assets/js/55.fc4ee3e5.js"><link rel="prefetch" href="/assets/js/56.b3d5da5a.js"><link rel="prefetch" href="/assets/js/57.cba627ff.js"><link rel="prefetch" href="/assets/js/58.e717cbde.js"><link rel="prefetch" href="/assets/js/59.9ffb3afa.js"><link rel="prefetch" href="/assets/js/6.4e71a9f3.js"><link rel="prefetch" href="/assets/js/60.7a6f9222.js"><link rel="prefetch" href="/assets/js/61.e58d71c8.js"><link rel="prefetch" href="/assets/js/62.8150c1e7.js"><link rel="prefetch" href="/assets/js/63.c1fc49e3.js"><link rel="prefetch" href="/assets/js/64.2789a6ff.js"><link rel="prefetch" href="/assets/js/7.cc892ba7.js"><link rel="prefetch" href="/assets/js/8.4cff1617.js"><link rel="prefetch" href="/assets/js/9.30cf3ef3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9379b0e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/ajv.svg" alt="Ajv JSON schema validator" class="logo"> <span class="site-name can-hide">Ajv JSON schema validator</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/why-ajv.html" class="nav-link">
  Why use Ajv
</a></li><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  Getting started
</a></li><li class="dropdown-item"><!----> <a href="/guide/typescript.html" class="nav-link">
  Using with TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/schema-language.html" class="nav-link">
  Choosing schema language
</a></li><li class="dropdown-item"><!----> <a href="/guide/managing-schemas.html" class="nav-link">
  Managing schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/combining-schemas.html" class="nav-link">
  Combining schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/formats.html" class="nav-link">
  Format validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/modifying-data.html" class="nav-link">
  Modifying data
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-keywords.html" class="nav-link">
  User-defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/guide/async-validation.html" class="nav-link">
  Asynchronous validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/environments.html" class="nav-link">
  Execution environments
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reference" class="dropdown-title"><span class="title">Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="Reference" class="mobile-dropdown-title"><span class="title">Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/api.html" class="nav-link">
  API Reference
</a></li><li class="dropdown-item"><!----> <a href="/options.html" class="nav-link">
  Ajv options
</a></li><li class="dropdown-item"><!----> <a href="/json-schema.html" class="nav-link">
  JSON Schema
</a></li><li class="dropdown-item"><!----> <a href="/json-type-definition.html" class="nav-link">
  JSON Type Definition
</a></li><li class="dropdown-item"><!----> <a href="/strict-mode.html" class="nav-link">
  Strict mode
</a></li><li class="dropdown-item"><!----> <a href="/standalone.html" class="nav-link">
  Standalone validation code
</a></li><li class="dropdown-item"><!----> <a href="/keywords.html" class="nav-link">
  User defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/coercion.html" class="nav-link">
  Type coercion rules
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn more" class="mobile-dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Extending Ajv
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/packages/" class="nav-link">
  Extending Ajv
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-cli.html" class="nav-link">
  ajv-cli
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-errors.html" class="nav-link">
  ajv-errors
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-formats.html" class="nav-link">
  ajv-formats
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-i18n.html" class="nav-link">
  ajv-i18n
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-keywords.html" class="nav-link">
  ajv-keywords
</a></li></ul></li><li class="dropdown-item"><h4>
          Contributors
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contributing.html" class="nav-link">
  Contributing guide
</a></li><li class="dropdown-subitem"><a href="/codegen.html" class="nav-link">
  Code generation design
</a></li><li class="dropdown-subitem"><a href="/components.html" class="nav-link">
  Code components
</a></li><li class="dropdown-subitem"><a href="/code_of_conduct.html" class="nav-link">
  Code of Conduct
</a></li></ul></li><li class="dropdown-item"><h4>
          Information
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/news/" class="nav-link">
  News
</a></li><li class="dropdown-subitem"><a href="/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-subitem"><a href="/v6-to-v8-migration.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Migrate from v6
</a></li><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="/license.html" class="nav-link">
  License
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title">Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title">Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/why-ajv.html" class="nav-link">
  Why use Ajv
</a></li><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  Getting started
</a></li><li class="dropdown-item"><!----> <a href="/guide/typescript.html" class="nav-link">
  Using with TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/schema-language.html" class="nav-link">
  Choosing schema language
</a></li><li class="dropdown-item"><!----> <a href="/guide/managing-schemas.html" class="nav-link">
  Managing schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/combining-schemas.html" class="nav-link">
  Combining schemas
</a></li><li class="dropdown-item"><!----> <a href="/guide/formats.html" class="nav-link">
  Format validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/modifying-data.html" class="nav-link">
  Modifying data
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-keywords.html" class="nav-link">
  User-defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/guide/async-validation.html" class="nav-link">
  Asynchronous validation
</a></li><li class="dropdown-item"><!----> <a href="/guide/environments.html" class="nav-link">
  Execution environments
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Reference" class="dropdown-title"><span class="title">Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="Reference" class="mobile-dropdown-title"><span class="title">Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/api.html" class="nav-link">
  API Reference
</a></li><li class="dropdown-item"><!----> <a href="/options.html" class="nav-link">
  Ajv options
</a></li><li class="dropdown-item"><!----> <a href="/json-schema.html" class="nav-link">
  JSON Schema
</a></li><li class="dropdown-item"><!----> <a href="/json-type-definition.html" class="nav-link">
  JSON Type Definition
</a></li><li class="dropdown-item"><!----> <a href="/strict-mode.html" class="nav-link">
  Strict mode
</a></li><li class="dropdown-item"><!----> <a href="/standalone.html" class="nav-link">
  Standalone validation code
</a></li><li class="dropdown-item"><!----> <a href="/keywords.html" class="nav-link">
  User defined keywords
</a></li><li class="dropdown-item"><!----> <a href="/coercion.html" class="nav-link">
  Type coercion rules
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn more" class="dropdown-title"><span class="title">Learn more</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn more" class="mobile-dropdown-title"><span class="title">Learn more</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Extending Ajv
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/packages/" class="nav-link">
  Extending Ajv
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-cli.html" class="nav-link">
  ajv-cli
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-errors.html" class="nav-link">
  ajv-errors
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-formats.html" class="nav-link">
  ajv-formats
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-i18n.html" class="nav-link">
  ajv-i18n
</a></li><li class="dropdown-subitem"><a href="/packages/ajv-keywords.html" class="nav-link">
  ajv-keywords
</a></li></ul></li><li class="dropdown-item"><h4>
          Contributors
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/contributing.html" class="nav-link">
  Contributing guide
</a></li><li class="dropdown-subitem"><a href="/codegen.html" class="nav-link">
  Code generation design
</a></li><li class="dropdown-subitem"><a href="/components.html" class="nav-link">
  Code components
</a></li><li class="dropdown-subitem"><a href="/code_of_conduct.html" class="nav-link">
  Code of Conduct
</a></li></ul></li><li class="dropdown-item"><h4>
          Information
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/news/" class="nav-link">
  News
</a></li><li class="dropdown-subitem"><a href="/security.html" class="nav-link">
  Security
</a></li><li class="dropdown-subitem"><a href="/v6-to-v8-migration.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Migrate from v6
</a></li><li class="dropdown-subitem"><a href="/faq.html" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="/license.html" class="nav-link">
  License
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reference</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Extending Ajv</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Contributors</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Information</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/news/" class="sidebar-link">Ajv News</a></li><li><a href="/faq.html" class="sidebar-link">Frequently Asked Questions</a></li><li><a href="/security.html" class="sidebar-link">Security considerations</a></li><li><a href="/v6-to-v8-migration.html" aria-current="page" class="active sidebar-link">Migrate from v6 to v8</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v6-to-v8-migration.html#new-features" class="sidebar-link">New features</a></li><li class="sidebar-sub-header"><a href="/v6-to-v8-migration.html#better-typescript-support" class="sidebar-link">Better TypeScript support</a></li><li class="sidebar-sub-header"><a href="/v6-to-v8-migration.html#potential-migration-difficulties" class="sidebar-link">Potential migration difficulties</a></li><li class="sidebar-sub-header"><a href="/v6-to-v8-migration.html#api-changes" class="sidebar-link">API changes</a></li></ul></li><li><a href="/license.html" class="sidebar-link">License</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="changes-from-ajv-v6-12-6-to-v8-0-0"><a href="#changes-from-ajv-v6-12-6-to-v8-0-0" class="header-anchor">#</a> Changes from Ajv v6.12.6 to v8.0.0</h1> <p>If you are migrating from v7 see <a href="https://github.com/ajv-validator/ajv/releases/tag/v8.0.0" target="_blank" rel="noopener noreferrer">v8.0.0 release notes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p></p><div class="table-of-contents"><ul><li><a href="#new-features">New features</a></li><li><a href="#better-typescript-support">Better TypeScript support</a></li><li><a href="#potential-migration-difficulties">Potential migration difficulties</a></li><li><a href="#api-changes">API changes</a><ul><li><a href="#added-options">Added options</a></li><li><a href="#changed-options">Changed options</a></li><li><a href="#removed-options">Removed options</a></li></ul></li></ul></div><p></p> <h2 id="new-features"><a href="#new-features" class="header-anchor">#</a> New features</h2> <ul><li>support new schema specifications:
<ul><li><a href="/json-type-definition.html">JSON Type Definition</a> <a href="https://datatracker.ietf.org/doc/rfc8927/" target="_blank" rel="noopener noreferrer">RFC8927<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. See <a href="https://ajv.js.org/guide/schema-language.html" target="_blank" rel="noopener noreferrer">choosing schema language<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for comparison with JSON Schema.</li> <li>JSON Schema draft-2020-12: <a href="/json-schema.html#prefixitems">prefixItems</a> keyword and changed semantics of <a href="/json-schema.html#items-in-draft-2020-12">items</a> keyword, <a href="/guide/combining-schemas.html#extending-recursive-schemas">dynamic recursive references</a>.</li> <li>JSON Schema draft-2019-09 features: <a href="/json-schema.html#unevaluatedproperties"><code>unevaluatedProperties</code></a> and <a href="/json-schema.html#unevaluateditems"><code>unevaluatedItems</code></a>, <a href="/guide/combining-schemas.html#extending-recursive-schemas">dynamic recursive references</a> and other <a href="/json-schema.html#json-schema-draft-2019-09">additional keywords</a>.</li> <li>OpenAPI <a href="/json-schema.html#discriminator">discriminator</a> keyword.</li></ul></li> <li>Compiled parsers (as fast as JSON.parse on valid JSON, but replace validation and fail much faster on invalid JSON) and serializers (10x+ faster than JSON.stringify) from JSON Type Definition schemas - see examples in <a href="/guide/getting-started.html#parsing-and-serializing-json">javascript</a> and <a href="/guide/typescript.html#type-safe-parsers-and-serializers">typescript</a>.</li> <li>comprehensive support for <a href="/standalone.html">standalone validation code</a> - compiling one or multiple schemas to standalone modules with one or multiple exports.</li> <li>to reduce the mistakes in JSON schemas and unexpected validation results, <a href="/strict-mode.html">strict mode</a> is added - it prohibits ignored or ambiguous JSON Schema elements. See <a href="/strict-mode.html">Strict mode</a> and <a href="/options.html">Options</a> for more details.</li> <li>to make code injection from untrusted schemas impossible, <a href="/codegen.html">code generation</a> is fully re-written to be type-level safe against code injection.</li> <li>to simplify Ajv extensions, the new keyword API that is used by pre-defined keywords is available to user-defined keywords - it is much easier to define any keywords now, especially with subschemas.</li> <li>schemas are compiled to ES6 code (ES5 code generation is supported with an option).</li> <li>to improve reliability and maintainability the code is migrated to TypeScript.</li> <li>separate Ajv classes from draft-07, draft-2019-09, draft-2020-12 and JSON Type Definition support with different default imports (see <a href="/guide/getting-started.html">Getting started</a>.</li></ul> <p><strong>Please note</strong>:</p> <ul><li>the support for JSON-Schema draft-04 is removed - if you have schemas using &quot;id&quot; attributes you have to replace them with &quot;$id&quot; (or continue using version 6 that will be supported until 06/30/2021).</li> <li>all formats are separated to <a href="https://github.com/ajv-validator/ajv-formats" target="_blank" rel="noopener noreferrer">ajv-formats<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> package - they have to be explicitly added if you use them.</li> <li>Ajv instance can only be created with <code>new</code> keyword, as Ajv is now ES6 class.</li> <li>browser bundles are automatically published to ajv-dist package (but still available on cdnjs.com).</li> <li>order of schema keyword validation changed - keywords that apply to all types (allOf etc.) are now validated first, before the keywords that apply to specific data types. You can still define custom keywords that apply to all types AND are validated after type-specific keywords using option <code>post: true</code> in keyword definition.</li> <li>regular expressions in keywords &quot;pattern&quot; and &quot;patternProperties&quot; are now used as if they had unicode &quot;u&quot; flag, as required by JSON Schema specification - it means that some regular expressions that were valid with Ajv v6 are now invalid (and vice versa).</li> <li>JSON Schema validation errors changes:
<ul><li><code>dataPath</code> property replaced with <code>instancePath</code></li> <li>&quot;should&quot; replaced with &quot;must&quot; in the messages</li> <li>property name is removed from &quot;propertyName&quot; keyword error message (it is still available in <code>error.params.propertyName</code>).</li></ul></li></ul> <h2 id="better-typescript-support"><a href="#better-typescript-support" class="header-anchor">#</a> Better TypeScript support</h2> <ul><li>Methods <code>compile</code> and <code>compileAsync</code> now return type-guards - see <a href="/guide/getting-started.html">Getting started</a>.</li> <li>Method <code>validate</code> is a type-guard.</li> <li>Better separation of asynchronous schemas on type level.</li> <li>Schema utility types to simplify writing schemas:
<ul><li>JSONSchemaType&lt;T&gt;: generates the type for JSON Schema for type interface in the type parameter.</li> <li>JTDSchemaType&lt;T&gt;: generates the type for JSON Type Definition schema for type interface in the type parameter.</li> <li>JTDDataType&lt;T&gt;: generates the type for data given JSON Type Definition schema type in the type parameter.</li></ul></li></ul> <h2 id="potential-migration-difficulties"><a href="#potential-migration-difficulties" class="header-anchor">#</a> Potential migration difficulties</h2> <ul><li>Schema compilation is now safer against code injections but slower than in v6 (<a href="https://github.com/ajv-validator/ajv/issues/1386" target="_blank" rel="noopener noreferrer">#1386<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) - consider using <a href="/standalone.html">standalone validation code</a> if this is a problem. Validation performance in v8 is the same (or better, thanks to <a href="/codegen.html#code-optimization">code optimizations</a>).</li> <li>Schema object used as a key for compiled schema function, not serialized string (<a href="https://github.com/ajv-validator/ajv/issues/1413" target="_blank" rel="noopener noreferrer">#1413<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) can cause schema compilation on each validation if you pass a new schema object. See <a href="/guide/managing-schemas.html">Managing schemas</a> for different approaches to manage caching of compiled validation functions.</li> <li>User defined formats with standalone validation code (<a href="https://github.com/ajv-validator/ajv/issues/1470" target="_blank" rel="noopener noreferrer">#1470<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) require passing code snippet to <a href="/options.html#code">code.formats</a> option.</li></ul> <h2 id="api-changes"><a href="#api-changes" class="header-anchor">#</a> API changes</h2> <ul><li>addVocabulary - NEW method that allows to add an array of keyword definitions.</li> <li>addKeyword - keyword name should be passed as property in definition object, not as the first parameter (old API works with &quot;deprecated&quot; warning). Also &quot;inline&quot; keywords support is removed, code generation keywords can now be defined with &quot;code&quot; keyword - the same definition format that is used by all pre-defined keywords.</li> <li>Ajv no longer allows to create the instance without <code>new</code> keyword (it is ES6 class).</li> <li>allow <code>&quot;:&quot;</code> in keyword names.</li></ul> <h3 id="added-options"><a href="#added-options" class="header-anchor">#</a> Added options</h3> <ul><li>strict: true/false/&quot;log&quot; - enables/disables all strict mode restrictions:
<ul><li>strictSchema: <strong>true</strong>/false/&quot;log&quot; - equivalent to the combination of strictKeywords and strictDefaults in v6, with additional restrictions (see <a href="/strict-mode.html">Strict mode</a>).</li> <li>strictTypes: true/false/<strong>&quot;log&quot;</strong> - prevent mistakes related to type keywords and keyword applicability (see <a href="/strict-mode.html#strict-types">Strict Types</a>).</li> <li>strictTuples: true/false/<strong>&quot;log&quot;</strong> - prevent incomplete tuple schemas (see <a href="/strict-mode.html#prohibit-unconstrained-tuples">Prohibit unconstrained tuples</a>)</li> <li>strictRequired: true/<strong>false</strong>/&quot;log&quot; - to log or fail if properties used in JSON Schema &quot;required&quot; are not defined in &quot;properties&quot; (see <a href="/strict-mode.html#defined-required-properties">Defined required properties</a>).</li></ul></li> <li>allowUnionTypes: false - allow multiple non-null types in &quot;type&quot; keyword</li> <li>allowMatchingProperties: false - allow overlap between &quot;properties&quot; and &quot;patternProperties&quot; keywords</li> <li>discriminator: true - support OpenAPI <a href="/json-schema.html#discriminator">discriminator</a> keyword</li> <li>loopEnum - optimise validation of enums, similar to <a href="/options.html#looprequired">loopRequired</a> option.</li> <li>validateFormats - enable format validation (<code>true</code> by default)</li> <li>code: {optimize: number|boolean} - control <a href="/codegen.html#code-optimization">code optimisation</a></li> <li>code: {es5: true} - generate ES5 code, the default is to generate ES6 code.</li> <li>code: {lines: true} - add line breaks to generated code - simplifies debugging of compiled schemas when you need it</li></ul> <h3 id="changed-options"><a href="#changed-options" class="header-anchor">#</a> Changed options</h3> <ul><li><code>keywords</code> - now expects the array of keyword definitions (old API works with &quot;deprecated&quot; warning).</li> <li><code>strictNumbers</code> - true by default now.</li></ul> <h3 id="removed-options"><a href="#removed-options" class="header-anchor">#</a> Removed options</h3> <ul><li>errorDataPath - was deprecated, now removed.</li> <li>format - <code>validateFormats: false</code> can be used instead, format mode can be chosen via ajv-formats package.</li> <li>nullable: <code>nullable</code> keyword is supported by default.</li> <li>jsonPointers: JSONPointers are used to report errors by default, <code>jsPropertySyntax: true</code> (deprecated) can be used if old format is needed.</li> <li>unicode: deprecated, string length correctly accounts for multi-byte characters by default.</li> <li>extendRefs: $ref siblings are validated by default (consistent with draft 2019-09), <code>ignoreKeywordsWithRef</code> (deprecated) can be used instead to ignore $ref siblings.</li> <li>missingRefs: now exception is always thrown. Pass empty schema with $id that should be ignored to ajv.addSchema.</li> <li>processCode: replaced with <code>code: {process: (code, schemaEnv: object) =&gt; string}</code>.</li> <li>sourceCode: replaced with <code>code: {source: true}</code>.</li> <li>schemaId: removed, as JSON Schema draft-04 is no longer supported.</li> <li>strictDefaults, strictKeywords: it is default now, controlled with <code>strict</code> or <code>strictSchema</code>.</li> <li>uniqueItems: '&quot;uniqueItems&quot; keyword is always validated.</li> <li>unknownFormats: the same can be achieved by passing true for formats that need to be ignored via <code>ajv.addFormat</code> or <code>formats</code> option.</li> <li>cache and serialize: Map is used as cache, schema object as key.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ajv-validator/ajv/edit/master/docs/v6-to-v8-migration.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/security.html" class="prev">
        Security considerations
      </a></span> <span class="next"><a href="/license.html">
        License
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0db1b107.js" defer></script><script src="/assets/js/2.2673a9d6.js" defer></script><script src="/assets/js/16.0e08068f.js" defer></script><script src="/assets/js/65.a59a9ffe.js" defer></script>
  </body>
</html>
